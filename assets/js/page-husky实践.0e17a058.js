(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1143:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("在做前端工程化时husky可以说是一个必不可少的工具，husky可以让我们向项目中方便添加git hooks。")])]),s._v(" "),a("h2",{attrs:{id:"项目背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目背景"}},[s._v("#")]),s._v(" 项目背景")]),s._v(" "),a("blockquote",[a("p",[s._v("公司项目是基于飞冰的微前端项目，但是由于项目中老代码较多、风格多样化、codeReview又比较耗时，所以就希望通过 "),a("code",[s._v("pre-commit")]),s._v("做一些提交前的校验，以此来使团队中的代码格式统一，同时也利于后期代码的维护。")])]),s._v(" "),a("p",[s._v("开发环境：")]),s._v(" "),a("ul",[a("li",[s._v("项目："),a("code",[s._v("@ice/stark-app@v1.4.1")])]),s._v(" "),a("li",[s._v("husky版本："),a("code",[s._v("@v7.0.4")])])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("官方文档："),a("a",{attrs:{href:"https://typicode.github.io/husky/#/?id=install",target:"_blank",rel:"noopener noreferrer"}},[s._v("传送门"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("下载")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" husky --save-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),a("h3",{attrs:{id:"添加prepare脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加prepare脚本"}},[s._v("#")]),s._v(" 添加"),a("code",[s._v("prepare")]),s._v("脚本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" set-script prepare "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husky install"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run prepare\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("或直接在"),a("code",[s._v("package.json")]),s._v("中添加如下脚本")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepare"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"husky install"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("prepare脚本会在"),a("code",[s._v("npm install")]),s._v("（不带参数）之后自动执行。也就是说当我们执行npm install安装完项目依赖后会执行 "),a("code",[s._v("husky install")]),s._v("命令，该命令会创建.husky/目录并指定该目录为git hooks所在的目录。")])]),s._v(" "),a("h3",{attrs:{id:"添加pre-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加pre-commit"}},[s._v("#")]),s._v(" 添加"),a("code",[s._v("pre-commit")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("npx husky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/pre-commit "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run lint"')]),s._v("\n\n// or\nhusky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/pre-commit "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run lint"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/pre-commit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("执行完上述代码后，会在你的项目根目录中"),a("code",[s._v(".husky")]),s._v("文件夹下新增一个名为"),a("code",[s._v("pre-commit")]),s._v("的shell脚本。"),a("code",[s._v("pre-commit")]),s._v("脚本内容如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/_/husky.sh"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run lint\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("当我们执行"),a("code",[s._v("git commit")]),s._v("命令时会先执行"),a("code",[s._v("pre-commit")]),s._v("这个脚本，注意："),a("code",[s._v("npm run lint")]),s._v("脚本需要先配置好")])]),s._v(" "),a("h3",{attrs:{id:"添加commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加commit-msg"}},[s._v("#")]),s._v(" 添加"),a("code",[s._v("commit-msg")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("npx husky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/commit-msg "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'npx --no-install commitlint --edit \"$1\"'")]),s._v(" \n\n// or\n\nhusky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/commit-msg "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'npx --no-install commitlint --edit \"$1\"'")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("执行完上述代码后，会在你的项目根目录中生成"),a("code",[s._v(".husky")]),s._v("文件夹，目录下新增了一个名为"),a("code",[s._v("pre-commit")]),s._v("的shell脚本。"),a("code",[s._v("pre-commit")]),s._v("脚本内容如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/_/husky.sh"')]),s._v("\n\nnpx --no-install commitlint --edit "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("--no-install 参数表示强制npx使用项目中node_modules目录中的commitlint包")])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("相关信息")]),s._v(" "),a("p",[a("code",[s._v("commit-msg")]),s._v("会在"),a("code",[s._v("pre-commit")]),s._v("钩子之后执行。")])]),s._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("commit-msg")]),s._v("会在"),a("code",[s._v("pre-commit")]),s._v("之后执行")])]),s._v(" "),a("h3",{attrs:{id:"pre-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-commit"}},[s._v("#")]),s._v(" "),a("code",[s._v("pre-commit")])]),s._v(" "),a("blockquote",[a("p",[s._v("此时会执行"),a("code",[s._v("pre-commit")]),s._v("shell文件，然后调用"),a("code",[s._v("npm run lint")]),s._v("脚本。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fix: asfsdf"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kylin-operation@3.0.52 lint C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("kylin-operation\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run eslint "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run stylelint\n\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kylin-operation@3.0.52 eslint C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Desktop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("kylin-operation\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" eslint --cache --ext .js,.jsx,.ts,.tsx ./\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".省略\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit-msg"}},[s._v("#")]),s._v(" "),a("code",[s._v("commit-msg")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("pre-commit")]),s._v("执行完后会执行"),a("code",[s._v("commit-msg")]),s._v("shell文件。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"asfsdf"')]),s._v("\n⧗   input: asfsdf                           \n✖   subject may not be empty "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("subject-empty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n✖   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" may not be empty "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("type-empty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      \n\n✖   found "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" problems, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" warnings\nⓘ   Get help: https://github.com/conventional-changelog/commitlint/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#what-is-commitlint")]),s._v("\n\nhusky - commit-msg hook exited with code "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("p",[s._v("错误原因是没有提交类型、没有主体内容。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"asd: asfsdf"')]),s._v("\n⧗   input: asd: asfsdf\n✖   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" must be one of "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("feat, fix, docs, style, test, refactor, chore, revert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("type-enum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n✖   found "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" problems, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" warnings\nⓘ   Get help: https://github.com/conventional-changelog/commitlint/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#what-is-commitlint")]),s._v("\n\nhusky - commit-msg hook exited with code "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("错误原因是提交的类型不对，只能是:  [feat, fix, docs, style, test, refactor, chore, revert] [type-enum]")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fix: asfsdf"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dev 300f27f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" fix: asfsdf\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" files changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" deletions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n create mode "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" .commitlintrc.js\n delete mode "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" commitlint.config.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("提交成功")])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("相关信息")]),s._v(" "),a("p",[s._v("新版的husky使用了从git 2.9开始引入的一个新功能"),a("code",[s._v("core.hooksPath")]),s._v("。"),a("code",[s._v("core.hooksPath")]),s._v("可以让你指定"),a("code",[s._v("git hooks")]),s._v("所在的目录而不是使用默认的"),a("code",[s._v(".git/hooks/")]),s._v("。这样husky可以使用"),a("code",[s._v("husky install")]),s._v("将"),a("code",[s._v("git hooks")]),s._v("的目录指定为"),a("code",[s._v(".husky/")]),s._v("，然后使用"),a("code",[s._v("husky add")]),s._v("命令向.husky/中添加hook。通过这种方式我们就可以只添加我们需要的git hook，而且所有的脚本都保存在了一个地方（.husky/目录下）因此也就不存在同步文件的问题了。")])]),s._v(" "),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),a("ol",[a("li",[s._v("这里介绍的是"),a("code",[s._v("husky@v.7.0.4")]),s._v("版本，v7之前的版本配置方式与这里介绍的有差异，请自行查阅官方文档进行实践。")]),s._v(" "),a("li",[a("code",[s._v("commit-msg")]),s._v("的配置需要依赖其他的包及配置，请移步至 "),a("RouterLink",{attrs:{to:"/views/frontEnd/webpack/25_commitlint提交规范.html"}},[s._v("@commitlint/cli制定提交规范")])],1)]),s._v(" "),a("h2",{attrs:{id:"参考博文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考博文"}},[s._v("#")]),s._v(" 参考博文")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://typicode.github.io/husky/#/?id=install",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/366786798",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky使用总结"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);