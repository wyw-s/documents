---
title: 变量
category: GoLang
date: 2022-01-16
---

> 的变量相当于内存中一个数据储存空间的表示，不论是使用哪种高级程序语言编写程序，变量都是其程序的基本组成单位。

常见变量的数据类型有：

- 整型
- 浮点型
- 布尔型
- 结构体

```go
package main

import "fmt"

func main() {
	// 声明一个整型类型的变量，保存整型数值。
	var age int

	// 变量赋值
	age = 18

	// 变量的使用
	fmt.Println("age = ", age)

	// 声明和赋值可以合成一句
	var age2 int = 19
	fmt.Println("age2 = ", age2)
}
```

::: info

go语言的每个变量都拥有自己的类型，必须经过声明才能开始用。

:::

## 声明变量

> 先通过一段代码了解变量声明的基本样式

```go
package main

import "fmt"

func main() {
	// 声明一个整型类型的变量，可以保存整型数值。
	var a int

	// 声明一个字符串类型的变量
	var b string

	// 声明一个32位浮点切片类型的变量，浮点切片表示由多个浮点类型组成的数据结构
	var c []float32

	// 声明一个返回值为布尔类型的函数变量，这种形式一般用于回调函数，即将函数以变量的形式保存下来，在需要的时候重新调用这个函数
	var d func() bool

	// 声明一个结构体类型的变量，这个结构体拥有一个整型的x字段。
	var e struct {
		x int
	}
}
```

## 标准格式

> go语言的变量声明格式为：`var 变量名 变量类型`

```go
// 变量声明以关键字var开头，后置变量类型，行尾无须分号。
var num int

// 声明并赋值
var num int = 12
```

## 批量格式

> 觉得每行都用var声明变量比较繁琐？没关系，还有一种为懒人提供的定义变量的方法：

```go
// 使用var 关键字和括号，可以将一组变量定义放在一起
var (
	a int
    b string
    c []float32
    d func() bool
    e struct {
        x int
    }
)
```

## 初始化变量

go语言在声明变量时，自动对变量对应的内存区域进行初始化操作。每个变量会初始化其类型的默认值，例如：

- 整型和浮点型变量的默认为0。
- 字符串变量的默认值为空字符串。
- 布尔型变量的默认为bool。
- 切片、函数、指针变量的默认为nil。

## 编译器自动推导类型的格式

在标准格式的基础上，将int省略后，编译器会尝试根据等号右边的表达式推到变量的类型。

```go
var hp = 100
```

> 等号右边的部分在编译原理里被称为“右值”。

下面是编译器根据右值推到变量类型完成初始化的例子

```go
var attack = 40

var defence = 20

var damage Rate float32 = 0.17

var damage float32(attack - defence) * damage Rate

fmt.Println(damage)
```

## 短变量声明并初始化

> var的变量声明还有一种更为精简的写法，例如：

```go
hp := 100
```

这是go语言的推导声明写法，编译器会自动根据右值类型推断出左值的对应类型。

::: info

由于使用了`:=`，而不是赋值的`=`，因此推导声明写法的左值变量必须是没有定义过的变量。若定义过，将会发生编译错误。

:::

## 多个变量同时赋值

## 匿名变量