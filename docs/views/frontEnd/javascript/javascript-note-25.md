---
title: 作用域
---

> 简单来说作用域就是根据名称查找变量的一套规则；

```javascript
// 全局作用域
function foo(a) {
  // foo 的作用域
  var b = a * 2;
  function bar(c) {
    // bar 的作用域
    console.log(a, b, c);
  }
  // 在 foo的作用中调用
  bar(b * 3);
}
foo(2); // 2, 4, 12
```

以上代码中有三层作用域：

1. 全局作用域：即`foo`所在的作用域;
2. 函数作用域：即`foo`函数所包含的作用域，也就是`bar`所在作用域；
3. 函数作用域：即`bar`函数所包含的作用域，也就是 `console.log(a, b, c)`代码执行的地方；

## 作用域分类

1. 静态作用域**(词法作用域):** static scope；
   - 如果函数中的变量，没有在该函数中定义，就去定义该函数的地方查找；
   - **静态作用域，也叫此法作用域，代码写完后，变量的作用域就已确定不变；**是由你写代码时将变量和块作用域写在哪里决定的。
   - js使用静态作用域；
2. 动态作用域: dynamic scope；
   - 如果函数中的变量，没有在该函数中定义，就去调用该函数的地方查找；
   - **动态作用域，代码写完后，变量的作用域还无法确定，它和调用它所在的函数有关；**

```javascript
let x = 10;
function f() {
  return x;
}
function g() {
  let x = 20;
  return f();
}
console.log(g());// 10;
```

## 函数作用域

> 使用var声明的变量在声明它的函数体以及该函数体中的嵌套函数体内都是可以访问的。

```javascript
var x = 5;
function f() {
  var y = 10;
  console.log(x, y);
  function f_1() {
    var z = 15;
    console.log(x, y, z);
  }
   f_1();
}
f();
```

## 作用域嵌套

> 当一个块或者函数嵌套在另一个块或函数中时，就发生了作用域嵌套。因此，在当前作用域中无法找到某个变量时，引擎就会在外层作用域中继续查找，知道找到该变量或抵达最外层的作用域（也就是全局作用域）为止；

**例：**

```javascript
function foo(a) {
  console.log(a + b);
}
var b = 2;
foo(2);
```

> 遍历嵌套作用域链的规则很简单，引擎首先从当前的执行作用域(foo函数体内)开始查找变量 b，如果找不到，就向上一级继续查找，当抵达最外层的全局作用域(全局作用域)时，发现有变量 b 。查找过程停止。